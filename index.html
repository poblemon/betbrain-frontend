<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis Completo - BetBrain IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white">
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script>
        const { useState, useEffect, createElement: e } = React;
        const API = 'https://betbrain-backend.onrender.com/api';
        
        // Simular datos (en producci√≥n vendr√≠an del backend)
        const mockAnalysis = {
            match: {
                home: "Barcelona",
                away: "Osasuna",
                date: "2024-12-08 15:00",
                venue: "Camp Nou, Barcelona",
                referee: "Jos√© Mar√≠a S√°nchez",
                competition: "LaLiga"
            },
            statistics: {
                home: {
                    avg_goals_scored: 2.4,
                    avg_goals_conceded: 0.8,
                    avg_corners: 7.2,
                    avg_yellow_cards: 2.1,
                    form: ["W", "W", "W", "D", "W"],
                    win_rate: 75,
                    over_25_percentage: 70,
                    btts_percentage: 45,
                    clean_sheet_rate: 55,
                    xg: 2.5,
                    xga: 0.9
                },
                away: {
                    avg_goals_scored: 1.2,
                    avg_goals_conceded: 1.8,
                    avg_corners: 4.5,
                    avg_yellow_cards: 2.8,
                    form: ["L", "D", "L", "W", "L"],
                    win_rate: 30,
                    over_25_percentage: 55,
                    btts_percentage: 60,
                    clean_sheet_rate: 20,
                    xg: 1.3,
                    xga: 1.9
                }
            },
            predictions: {
                result_1x2: { home_win: 72, draw: 18, away_win: 10 },
                goals: {
                    expected_home: 2.2,
                    expected_away: 0.9,
                    over_25: 68,
                    btts: 48
                },
                corners: { expected_total: 10.5, over_85: 75, over_95: 65 },
                cards: { expected_yellow: 4.5, over_35_cards: 70 }
            }
        };
        
        function MatchAnalysis() {
            const [activeTab, setActiveTab] = useState('overview');
            const [analysis, setAnalysis] = useState(mockAnalysis);
            
            const tabs = [
                { id: 'overview', name: 'üìä General', icon: 'üìä' },
                { id: 'stats', name: 'üìà Estad√≠sticas', icon: 'üìà' },
                { id: 'corners', name: 'üö© Corners', icon: 'üö©' },
                { id: 'cards', name: 'üü® Tarjetas', icon: 'üü®' },
                { id: 'players', name: '‚öΩ Jugadores', icon: '‚öΩ' },
                { id: 'predictions', name: 'üéØ Predicciones', icon: 'üéØ' }
            ];
            
            return e('div', { className: 'min-h-screen p-6' },
                e('div', { className: 'max-w-7xl mx-auto' },
                    // Header
                    e('div', { className: 'bg-slate-800/50 rounded-2xl p-6 mb-6 border border-purple-500/30' },
                        e('div', { className: 'flex items-center justify-between mb-4' },
                            e('button', {
                                onClick: () => window.history.back(),
                                className: 'text-purple-400 hover:text-purple-300'
                            }, '‚Üê Volver'),
                            e('div', { className: 'text-sm text-gray-400' }, analysis.match.competition)
                        ),
                        e('div', { className: 'grid md:grid-cols-3 gap-4 items-center text-center' },
                            e('div', {},
                                e('div', { className: 'text-3xl font-bold mb-2' }, analysis.match.home),
                                e('div', { className: 'flex justify-center gap-1' },
                                    analysis.statistics.home.form.map((r, i) =>
                                        e('span', {
                                            key: i,
                                            className: `w-8 h-8 rounded flex items-center justify-center text-sm font-bold ${
                                                r === 'W' ? 'bg-green-600' : r === 'D' ? 'bg-yellow-600' : 'bg-red-600'
                                            }`
                                        }, r)
                                    )
                                )
                            ),
                            e('div', { className: 'text-4xl font-bold text-purple-400' }, 'VS'),
                            e('div', {},
                                e('div', { className: 'text-3xl font-bold mb-2' }, analysis.match.away),
                                e('div', { className: 'flex justify-center gap-1' },
                                    analysis.statistics.away.form.map((r, i) =>
                                        e('span', {
                                            key: i,
                                            className: `w-8 h-8 rounded flex items-center justify-center text-sm font-bold ${
                                                r === 'W' ? 'bg-green-600' : r === 'D' ? 'bg-yellow-600' : 'bg-red-600'
                                            }`
                                        }, r)
                                    )
                                )
                            )
                        ),
                        e('div', { className: 'mt-6 grid grid-cols-2 gap-4 text-sm text-gray-300' },
                            e('div', {}, 'üìÖ ', analysis.match.date),
                            e('div', {}, 'üèüÔ∏è ', analysis.match.venue),
                            e('div', {}, 'üë®‚Äç‚öñÔ∏è ', analysis.match.referee),
                            e('div', {}, 'üèÜ ', analysis.match.competition)
                        )
                    ),
                    
                    // Tabs
                    e('div', { className: 'flex gap-2 mb-6 overflow-x-auto' },
                        tabs.map(tab =>
                            e('button', {
                                key: tab.id,
                                onClick: () => setActiveTab(tab.id),
                                className: `px-6 py-3 rounded-xl font-medium transition whitespace-nowrap ${
                                    activeTab === tab.id
                                        ? 'bg-gradient-to-r from-purple-600 to-pink-600'
                                        : 'bg-slate-800/50 hover:bg-slate-700/50'
                                }`
                            }, tab.icon, ' ', tab.name)
                        )
                    ),
                    
                    // Content
                    activeTab === 'overview' && e('div', { className: 'space-y-6' },
                        // Probabilidades principales
                        e('div', { className: 'bg-slate-800/50 rounded-xl p-6 border border-purple-500/20' },
                            e('h3', { className: 'text-2xl font-bold mb-4' }, 'üéØ Resultado Probable'),
                            e('div', { className: 'grid grid-cols-3 gap-4' },
                                [
                                    { label: analysis.match.home, prob: analysis.predictions.result_1x2.home_win, color: 'green' },
                                    { label: 'Empate', prob: analysis.predictions.result_1x2.draw, color: 'yellow' },
                                    { label: analysis.match.away, prob: analysis.predictions.result_1x2.away_win, color: 'blue' }
                                ].map((item, i) =>
                                    e('div', {
                                        key: i,
                                        className: 'bg-slate-700/30 rounded-xl p-4 text-center'
                                    },
                                        e('div', { className: 'text-sm text-gray-400 mb-2' }, item.label),
                                        e('div', { className: `text-4xl font-bold text-${item.color}-400` }, item.prob, '%'),
                                        e('div', { className: 'w-full bg-slate-600 rounded-full h-2 mt-3' },
                                            e('div', {
                                                className: `bg-${item.color}-500 h-2 rounded-full transition-all`,
                                                style: { width: `${item.prob}%` }
                                            })
                                        )
                                    )
                                )
                            )
                        ),
                        
                        // Stats r√°pidas
                        e('div', { className: 'grid md:grid-cols-2 gap-6' },
                            ['home', 'away'].map(team =>
                                e('div', {
                                    key: team,
                                    className: 'bg-slate-800/50 rounded-xl p-6 border border-purple-500/20'
                                },
                                    e('h4', { className: 'text-xl font-bold mb-4' }, analysis.match[team]),
                                    e('div', { className: 'space-y-3' },
                                        [
                                            { label: '‚öΩ Goles/partido', value: analysis.statistics[team].avg_goals_scored },
                                            { label: 'üõ°Ô∏è Goles recibidos', value: analysis.statistics[team].avg_goals_conceded },
                                            { label: 'üö© Corners/partido', value: analysis.statistics[team].avg_corners },
                                            { label: 'üü® Tarjetas/partido', value: analysis.statistics[team].avg_yellow_cards },
                                            { label: 'üìä Win rate', value: `${analysis.statistics[team].win_rate}%` },
                                            { label: 'üéØ xG', value: analysis.statistics[team].xg }
                                        ].map((stat, i) =>
                                            e('div', {
                                                key: i,
                                                className: 'flex justify-between items-center'
                                            },
                                                e('span', { className: 'text-gray-400' }, stat.label),
                                                e('span', { className: 'font-bold text-purple-400' }, stat.value)
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    ),
                    
                    activeTab === 'predictions' && e('div', { className: 'space-y-6' },
                        // Goles
                        e('div', { className: 'bg-slate-800/50 rounded-xl p-6 border border-purple-500/20' },
                            e('h3', { className: 'text-2xl font-bold mb-4' }, '‚öΩ Mercado de Goles'),
                            e('div', { className: 'grid md:grid-cols-2 gap-4' },
                                [
                                    { name: 'Over 2.5', prob: analysis.predictions.goals.over_25, rec: analysis.predictions.goals.over_25 > 65 },
                                    { name: 'Ambos anotan', prob: analysis.predictions.goals.btts, rec: analysis.predictions.goals.btts > 60 }
                                ].map((market, i) =>
                                    e('div', {
                                        key: i,
                                        className: `bg-slate-700/30 rounded-lg p-4 ${market.rec ? 'border-2 border-green-500' : ''}`
                                    },
                                        e('div', { className: 'flex justify-between items-center mb-2' },
                                            e('span', { className: 'font-semibold' }, market.name),
                                            market.rec && e('span', { className: 'text-xs bg-green-600 px-2 py-1 rounded' }, '‚úÖ Recomendado')
                                        ),
                                        e('div', { className: 'text-3xl font-bold text-purple-400' }, market.prob, '%')
                                    )
                                )
                            )
                        ),
                        
                        // Corners
                        e('div', { className: 'bg-slate-800/50 rounded-xl p-6 border border-purple-500/20' },
                            e('h3', { className: 'text-2xl font-bold mb-4' }, 'üö© Mercado de Corners'),
                            e('div', { className: 'grid grid-cols-3 gap-4' },
                                [
                                    { name: 'Over 8.5', prob: analysis.predictions.corners.over_85 },
                                    { name: 'Over 9.5', prob: analysis.predictions.corners.over_95 },
                                    { name: 'Total esperado', prob: analysis.predictions.corners.expected_total }
                                ].map((market, i) =>
                                    e('div', {
                                        key: i,
                                        className: 'bg-slate-700/30 rounded-lg p-4 text-center'
                                    },
                                        e('div', { className: 'text-sm text-gray-400 mb-2' }, market.name),
                                        e('div', { className: 'text-2xl font-bold text-yellow-400' }, 
                                            i === 2 ? market.prob : `${market.prob}%`
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        }
        
        ReactDOM.createRoot(document.getElementById('root')).render(e(MatchAnalysis));
    </script>
</body>
</html>
